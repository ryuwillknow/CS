## 큰 그림

운영체제 : 실행할 프로그램에 필요한 자원을 할당하고 프로그램이 올바르게 실행하도록 돕는 프로그램. 운영체제는 특별하기 때문에 컴퓨터 메모리 내 커널 영역에 적재되어 실행된다. 커널 영역을 제외한 나머지 영역을 사용자 영역이라고 한다. (이거 플래그레지스터에 있던 거) 프로그램을 메모리에 적제하는 걸 운영체제가 한다. 또 프로그램 별로 CPU의 사용시간을 운영체계가 배분한다. 순서를 배분하기도 한다. 

커널 : 자원에 접근하고 조작하는 기능, 프로그램을 올바르고 안전하게 실행되게 하는 기능 등 운영체제의 핵심 서비스를 담당하는 부분이 커널이다. 커널이 아닌 운영체제 서비스는 사용자 인터페이스(그래픽 유저 인터페이스, 커맨드 라인 인터페이스)가 있다. 이중모드란 CPU가 명령어를 실행하는 사용자 모드와 커널 모드로 나누는 것이다.  사용자 모드로 실행된 CPU는 입출력 명령어와 같은 하드웨어  자원에 접근하는 명령어를 실행할 수 없다. 커널 모드로 명령어를 실행하면 제약이 없다. 사용자 모드로 실행되는 프로그램이 자원에 접근하려명 운영체제에 요청을 보내 커널모드로 전환해야한다. 이 요청을 시스템 콜이라고 한다. 소프트웨어적인 인터럽트이다. 시스템 콜이 발생되면 cPU는 작업을 백업하고 커널영역 내에 인터럽트 서비스 루틴을 실행한 뒤 프로그램으로 복귀한다. 

운영체제의 핵심서비스 : 프로세스관리, 자원 접근 및 할당, 파일 시스템 관리를 담당한다. 현재 실행중인 프로그램을 프로세스라고 한다. CPU는 한번에 하나의 프로세스를 실행할 수 있기 때문에 여러프로세스를 ‘조금씩 번갈아 가면서’ 실행한다. 또 여러 프로세스를 동시에 실행하는 환경에서 프로세스 동기화가 필수적이다. 교착상태도 해결해야한다. CPU 스케줄링도 운영체제가 해준다. 메모리에 어떻게 적재하는지도 관리한다. 

가상머신은 가상 컴퓨터이다. 메모리의 크기 할당한다.하지만 이건 운영체제 위에 실행되는 것이므로 사용자모드로 작동한다. 하이퍼바이저 모드로 가상 머신에 실행된 운영체제를 제대로 활용할 수 있다. ⇒ 사실 모드가 3개일지도

시스템 호출 : fork 새 자식 프로세스 생성, execve 프로세스 실행 (메모리 공간에 덮에 씌움) exit 프로세스 종료, waitpid 자식 종료될 떄까지 대기,  파일 열기 닫기 읽기 쓰기 정도 획득, mkdir rmdir chdir(바꾸기) mount  unmount
