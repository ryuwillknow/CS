## 파일과 디렉터리

파일은 보조기억장치에 저장된 정보의 집합. 속성 혹은 메타데이터라는 부가정보가 있다. 파일 유형은 운영체제가 인식하는 파일의 종류를 나타낸다. 주로 확장자를 이용한다. 파일 연산을 위해 시스템 호출이 필요하다. 생성, 삭제 열기 닫기 쓰기 읽기 등.  디렉터리 = 폴더. 경로가 생긴다. 절대경로 상대경로가 있다. 디렉터리 시스템 호출도 있다. 디렉터리별 테이블이 있고 안에 내부 파일이 있다. 보조기억장치는 파티션 작업과 포맷 작업을 거쳐야만 파일을 생성할 수 있다. 파티셔닝은 논리적인 단위로 구획하는 것 포매팅은 파일 시스템을 설정하는 것. 완전히 지우는 것이 아니다. 운영체제는 파일과 디렉터리를 블록단위로 읽고 쓴다(섹터 - 블록 - 페이지) 연속할당, 불연속할당(연결할당, 색인 할당)이 있다. 연속할당은 외부 단편화 문제가 있다. 빈공간에 저장을 하지 못한다. 이를 해결하기 위해 연결할당을 한다. 파일을 이루는 데이터를 ‘연결 리스트’로 관리한다. 다음 블록주소를 기록한다. 마지막에는 특별한 표시자를 기록한다. 연결할당은 외부 단편화 문제를 해결하지만 단점도 존재한다. 반드시 첫번째 블록부터 하나씩 차례대로 읽어야한다. 임의 접근 속도가 매우 느리다. 하드웨어 고장시 해당 블록 이후 블록은 접근이 불가능하다. 이를 극복하기 위해 색인 할당을 사용한다. 색인 블록 하나에서 모든 블록 주소를 관리하는 방식이다. 색인 블록 내부에 주소들을 모두 적어놓고 파일에 접근하고 싶으면 색인블록에 저장된 주소에 차례대로 접근한다. 파일시스템에는 파일이름과 더불어 색인블록 주소가 명시된다!!!

실제 파일 시스템(I’ve been here) : USB, SD카드의 FAT과 유닉스 파일 시스템이 대표적이다. FAT은 색인 할당과 비슷하게 블록과 다음 블록의 주소를 파일 할당 테이블(FAT)에 저장한다. 테이블이 FAT이다. 연결할당의 단점을 극복한 케이스. FAT을 이용하는 파일시스템이 FAT파일 시스템이다. FAT파일 시스템은 파티션 앞부분에 만들어진다. FAT 파일 시스템을 사용하는 파티션의 도식도는 463페이지에서 확인. 예약영역 FAT 영역, 루트 디렉터리 영역, 데이터 영역 이로 파티션이 나뉜다. FAT영역이 메모리에 적재되면 블록 찾는 속도가 빠르다. 디렉토리는 파일이름과 메타데이터, 시작블록 등이 담겨있다. 루트 디렉터리에는 루트 디렉터리가 있고 데이터 영역에는 내부 폴더별로 디랙터리가 있다.  FAT에는 다음블록 주소가 있다. 유닉스 파일 시스템은 색인블록을 i-node라고 부른다. 여기에 파일 속성정보가 표현된다. 대신 이 친구는 유한하다. 15개의 블록 주소만 저장할 수 있다.(첫번쨰는 파일 정보) 12개는 직접 저장하고 내용이 충분하지 않으면  간접 블록 주소를 저장한다.( 이것도 부족하면 이중 삼중 간접 블록 주소를 저장한다. 12은 단일 13는 이중 14는 삼중 이정도하면 왠만한 파일 크기는 모두 표현이 가능하다. 이 친구의 파티션은 i-node와 데이터 영역으로 이루어져있다. i-node 영역에는 i-node와 대응하는 주소가 적혀있따. 데이터 영역에는 디렉터리가 저장되어있고 파일이름과 i-node 번호가 적혀있다. 여기에 여러개가 적혀있기도 하다!!! 이 부분이 FAT과 다르다. FAT은 다음거 연결,  이외에도 NTFS( 윈도우에서 쓰인다 ), EXT 등이 있다.

저널링 기법은 작업도중 전원이 나가거나 치명적인 오류가 발생했을 대 파일 시스템이 훼손되는 것을 방지하는 시스템이다. 수행작업에 대한 로그를 남기는 것이다. 

마운트 : 연결
