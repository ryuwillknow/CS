## CPU 성능 향상 기법

CPU는 클럭 신호에 맞춰서 움직인다. 클럭이 높다면 명령어 사이클이 더 빠르게 반복할 것이다. 단 발열을 잡아야한다.

코어수를 늘리면 더 빨라진다. 명령어를 실행하는 부품을 여러개 포함하면 멀티코어 프로세서가 된다. 

스레드!!! 스레드는 실행흐름의 단위이다. 내가 매우 궁금했던 것!! 소프트웨어 스레드와 하드웨어 스레드가 다르다! 하드웨어적 스레드는 하나의 코어에서 동시에 처리하는 명령어의 단위를 의미한다. 하나의 CPU가 여러개의 명령어를 동시에 처리하면 멀티스레드 프로세서라고 불린다. intel은 하이퍼 스레드라고 부른다. 반면 소프트웨어적 스레드는 하나의 프로그램에서 독립적으로 실행되는 단위를 의미한다. (화명보여주기 기능, 맞춤법 검사기능, 저장기능을 소프트웨어 멀티스레드로,  하드웨어적 스레드와 1:1 매칭이 아니다. 1코어 1스레드도 여러 소프트웨어적 스레드를 실행할 수 있다. 그럼 객체로 사용하는 것은 어떻게?) 

멀티스레드 프로세서를 만들려면 레지스터 세트를 여러개 두면 된다. 이런 하나의 스레드를 논리 프로세서라고 부른다.

명령어 병렬처리기법! : 명령어 파이프 라이닝, 슈퍼스칼라, 비순차적 명령어 처리 등이 있다. 명령어 파이프라이닝은 명령어 처리과정을 클럭단위로 나눠 명령어 인출, 명령어 해석, 명령어 실행, 결과저장으로 이어지는 과정을 겹쳐서 수행하는 것이다. 파이프 라이닝(순차적으로 실행하는 프로세서에서 병렬로 처리하기)은 높은 성능을 가져오지만 데이터 위험(데이터 의존성에 의해 발생, 수행하려는 명령어가 다른 명령의 결과값을 사용할 때), 제어 위험(실행하는 주소가 변화한다면), 구조적 위험(서로 다른 명령어가 동시에 cpu에 들어올 때)이 생긴다. 파이프라이닝은 하나의 파이프 라인으로 구현 가능하지만 오늘날 CPU는 여러개의 파이프라인을 사용한다. 두개 이상의 파이프 라인을 사용하는 것을 슈퍼스칼라라고 한다. 위 두 기법은 명령어를 순차적으로 처리한다. 하지만 비순차적 명령어 처리는 의존성에 따라서 명령어 실행 순서를 바꾸는 기법이다. 

CISC와 RISC : 파이프라이닝에 유리하게 만들기 위해! CPU마다 명령어의 생김새, 연산, 주소지정 방식이 조금씩 차이가 있다. CPU가 이해할 수 있는명령어들이 모음을 명령어 집합 구조 ISA라고 한다. ISA 중에서도 파이프라인, 슈퍼스칼라, 비순차적 명령어 처리를 사용하기 유리한 것들이 있다. 현대 가장 많이 쓰이는 CISC RISC를 통해 그 차이를 알아보자.

CISC : 가변길이 명령어를 사용한다. 메모리 접근 주소방식도 다양하다. 적은 수의 명령어로도 프로그램을 실행할 수 있다. 단 명령어가 복잡해서 명령어의 크기와 실행하는 시간이 일정하지 않다. 따라서 여러 클럭주기가 필요하다. 때문에 파이프라이닝에 불리하다. 다양한 명령어를 제공하지만 쓰이는 명령어는 적었다. (주소 지정방식이 더 많다.)

RISC : 짧고 규격화된 명령어를 활용한다. 고정길이 명령어를 사용하고 메모리 접근 명령어를 load, store 두개로  줄였다. 메모리 접근을 단순화 최소화 하는 대신 레지스터를 적극적으로 활용한다. CISC보다 레지스터 개수도 많고 명령어의 개수도 많다.
