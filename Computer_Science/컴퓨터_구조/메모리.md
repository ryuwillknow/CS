## 메모리와 캐시메모리

주기억장치는 RAM과 ROM이 있다. 일반적으로 RAM을 이야기한다. RAM은 전원을 끄면 저장된 내용이 모두 사라지는 휘발성 저장 장치이다. 아닌 것들을 보조기억장치라고 한다. CPU는 보조기억장치에 접근하지 못한다. 

RAM은 꽂혀있는 책과 같다. 용량이 많으면 보조기억장치에서 가져오지 않아도 돼 시간이 단축된다. DRAM(Dynamic RAM)는 시간이 지나면 데이터가 점차사라지는 RAM을 의마한다. 소멸을 막기위해 일정 주기로 데이터를 재활성화해야한다. SRAM(Static RAM)은 시간이 지나도 변하지 않고 속도도 DRAM보다 빠르다. 하지만 집적도가 낮고 소비 전력이 크고 가격이 비싸다. SRAM은 캐시메모리에 사용된다. SDRAM(Sychronous Dynamic RAM)은 클럭신호와 동기화된 발저노딘 형태의 DRAM이다. DDR SDRAM (Double Data Rate SDRAM)은 대역폭을 넓혀 속도를 빠르게 만든 SDRAM이다. 한 클럭당 주번씩 CPU와 데이터를 주고 받을 수 있다. SDR(single) DDR2는 네 배, DDR3는 여덟 배, DDR4 열여섯 배 빠르다.

메모리 주소 공간 : 물리주소와 논리주소로 나뉜다. 물리주소는 하드웨어상의 실제 주소를 의미하고 논리주소는 CPU와 실행 중인 프로그램이 사용하는 주소이다. CPU와 메모리가 상호작용하려면 물리주소와 논리 주소의 변환이 필요하다. 메모리 관리 장치(MMU)라는 하드웨어가 해준다. CPU의 논리주소에 베이스 레지스터 값을 더한해서 메모리에 접근한다.  하지만 논리주소가 프로그램의 물리주소 범위를 넘어가면 다른 프로그램에 영향을 줄 수 있으므로 한계레지스터 값을 통해 보호한다. 논리 주소는 한계레지스터를 넘을 수 없다. 베이스 레지스터와 한계 레지스터를 기억하자.

캐시 메모리 : CPU 연산속도 > 메모리 접근 속도 ⇒ 캐시 메모리 필요. 저장 장치 계층 구조( 레지스터, 메모리, 보조기억장치 순) 캐시메모리는 SRAM기반의 저장장치이다. 컴퓨터 내부에는 여러개의 캐시메모리가 있다. 가장 가까운 순으로 L1 L2 L3 캐시라고 부른다. 분리형 캐시도 있다. 코어 내부 외부 어디에든 존재한다. 코어 외부의 캐시를 다른 코어와 공유할 수도 있다!!!

참조 지역성 원리 : 캐시메모리는 CPU가 사용할 법한 대상을 예측하여 저장한다. 그 값이 실제로 들어 맞으면 캐시히트라고 한다. 틀리면 캐시미스가 발생한다. 캐시 적중률을 높이는 것이 성능에 중요한 영향을 끼친다. 캐시 메모리는 참조 지역성의 원리에 따라 데이터를 가져온다. 최근 접근 메모리, 접근한 메모리 근처를 캐시 메모리에 저장한다. 시간지역성 = 최근 접근했던 메모리에 다시 접근, 공간지역성 = 관련 데이터가 주변에 있다.
